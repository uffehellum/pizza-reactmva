{"version":3,"file":"ColorPicker.base.js","sourceRoot":"../src/","sources":["components/ColorPicker/ColorPicker.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { BaseComponent, classNamesFunction } from '../../Utilities';\r\nimport { IColorPickerProps, IColorPickerStyleProps, IColorPickerStyles } from './ColorPicker.types';\r\nimport { ITextField, TextField } from '../../TextField';\r\nimport { ColorRectangle } from './ColorRectangle/ColorRectangle';\r\nimport { ColorSlider } from './ColorSlider/ColorSlider';\r\nimport { MAX_COLOR_HUE, IColor, getColorFromString, getColorFromRGBA, updateA, updateH, updateSV } from '../../utilities/color/colors';\r\n\r\nexport interface IColorPickerState {\r\n  isOpen: boolean;\r\n  color: IColor;\r\n}\r\n\r\nconst getClassNames = classNamesFunction<IColorPickerStyleProps, IColorPickerStyles>();\r\n\r\nexport class ColorPickerBase extends BaseComponent<IColorPickerProps, IColorPickerState> {\r\n  public static defaultProps = {\r\n    hexLabel: 'Hex',\r\n    redLabel: 'Red',\r\n    greenLabel: 'Green',\r\n    blueLabel: 'Blue',\r\n    alphaLabel: 'Alpha'\r\n  };\r\n\r\n  private _hexText = React.createRef<ITextField>();\r\n  private _rText = React.createRef<ITextField>();\r\n  private _gText = React.createRef<ITextField>();\r\n  private _bText = React.createRef<ITextField>();\r\n  private _aText = React.createRef<ITextField>();\r\n\r\n  constructor(props: IColorPickerProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      color: getColorFromString(props.color)\r\n    } as IColorPickerState;\r\n  }\r\n\r\n  public componentWillReceiveProps(newProps: IColorPickerProps): void {\r\n    if (newProps.color) {\r\n      this._updateColor(getColorFromString(newProps.color));\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { theme, className, styles } = this.props;\r\n    const { color } = this.state;\r\n\r\n    const classNames = getClassNames(styles!, {\r\n      theme: theme!,\r\n      className\r\n    });\r\n\r\n    return (\r\n      <div className={classNames.root}>\r\n        <div className={classNames.panel}>\r\n          <ColorRectangle color={color} onSVChanged={this._onSVChanged} />\r\n          <ColorSlider className=\"is-hue\" minValue={0} maxValue={MAX_COLOR_HUE} value={color.h} onChange={this._onHChanged} />\r\n          {!this.props.alphaSliderHidden && (\r\n            <ColorSlider\r\n              className=\"is-alpha\"\r\n              isAlpha\r\n              overlayStyle={{ background: `linear-gradient(to right, transparent 0, #${color.hex} 100%)` }}\r\n              minValue={0}\r\n              maxValue={100}\r\n              value={color.a}\r\n              onChange={this._onAChanged}\r\n            />\r\n          )}\r\n          <table className={classNames.table} cellPadding=\"0\" cellSpacing=\"0\">\r\n            <thead>\r\n              <tr className={classNames.tableHeader}>\r\n                <td className={classNames.tableHexCell}>{this.props.hexLabel}</td>\r\n                <td>{this.props.redLabel}</td>\r\n                <td>{this.props.greenLabel}</td>\r\n                <td>{this.props.blueLabel}</td>\r\n                {!this.props.alphaSliderHidden && <td>{this.props.alphaLabel}</td>}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>\r\n                  <TextField\r\n                    className={classNames.input}\r\n                    value={color.hex}\r\n                    componentRef={this._hexText}\r\n                    onBlur={this._onHexChanged}\r\n                    spellCheck={false}\r\n                    ariaLabel={this.props.hexLabel}\r\n                  />\r\n                </td>\r\n                <td style={{ width: '18%' }}>\r\n                  <TextField\r\n                    className={classNames.input}\r\n                    onBlur={this._onRGBAChanged}\r\n                    value={String(color.r)}\r\n                    componentRef={this._rText}\r\n                    spellCheck={false}\r\n                    ariaLabel={this.props.redLabel}\r\n                  />\r\n                </td>\r\n                <td style={{ width: '18%' }}>\r\n                  <TextField\r\n                    className={classNames.input}\r\n                    onBlur={this._onRGBAChanged}\r\n                    value={String(color.g)}\r\n                    componentRef={this._gText}\r\n                    spellCheck={false}\r\n                    ariaLabel={this.props.greenLabel}\r\n                  />\r\n                </td>\r\n                <td style={{ width: '18%' }}>\r\n                  <TextField\r\n                    className={classNames.input}\r\n                    onBlur={this._onRGBAChanged}\r\n                    value={String(color.b)}\r\n                    componentRef={this._bText}\r\n                    spellCheck={false}\r\n                    ariaLabel={this.props.blueLabel}\r\n                  />\r\n                </td>\r\n                {!this.props.alphaSliderHidden && (\r\n                  <td style={{ width: '18%' }}>\r\n                    <TextField\r\n                      className={classNames.input}\r\n                      onBlur={this._onRGBAChanged}\r\n                      value={String(color.a ? color.a.toPrecision(3) : color.a)}\r\n                      componentRef={this._aText}\r\n                      spellCheck={false}\r\n                      ariaLabel={this.props.alphaLabel}\r\n                    />\r\n                  </td>\r\n                )}\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _onSVChanged = (s: number, v: number): void => {\r\n    this._updateColor(updateSV(this.state.color, s, v));\r\n  };\r\n\r\n  private _onHChanged = (ev: React.MouseEvent<HTMLElement>, h: number): void => {\r\n    this._updateColor(updateH(this.state.color, h));\r\n  };\r\n\r\n  private _onAChanged = (ev: React.MouseEvent<HTMLElement>, a: number): void => {\r\n    this._updateColor(updateA(this.state.color, a));\r\n  };\r\n\r\n  private _onHexChanged = (): void => {\r\n    if (this._hexText.current) {\r\n      this._updateColor(getColorFromString('#' + this._hexText.current.value));\r\n    }\r\n  };\r\n\r\n  private _onRGBAChanged = (): void => {\r\n    if (!this._rText.current || !this._gText.current || !this._bText.current || !this._aText.current) {\r\n      return;\r\n    }\r\n\r\n    this._updateColor(\r\n      getColorFromRGBA({\r\n        r: Number(this._rText.current.value),\r\n        g: Number(this._gText.current.value),\r\n        b: Number(this._bText.current.value),\r\n        a: Number(this._aText.current.value || 100)\r\n      })\r\n    );\r\n  };\r\n\r\n  private _updateColor(newColor?: IColor): void {\r\n    if (!newColor) {\r\n      return;\r\n    }\r\n\r\n    const { onColorChanged } = this.props;\r\n    const { color } = this.state;\r\n    const hasColorStringChanged = newColor.str !== color.str;\r\n    if (newColor.h !== color.h || hasColorStringChanged) {\r\n      this.setState(\r\n        {\r\n          color: newColor\r\n        } as IColorPickerState,\r\n        () => {\r\n          if (hasColorStringChanged && onColorChanged) {\r\n            onColorChanged(newColor.str, newColor);\r\n          }\r\n        }\r\n      );\r\n    }\r\n  }\r\n}\r\n"]}